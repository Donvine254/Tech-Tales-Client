/**
 * TinyMCE version 7.3.0 (2024-08-07)
 */
tinymce.PluginManager.add("code",e=>{let t=()=>{document.body.insertAdjacentHTML("beforeend",'<dialog id="sourceCode" class="modal" style=" width: 90%; height: 90%; background-color: #fff; border: 1px solid #ccc; border-radius: 8px; padding: 10px; color:#2b2b2b; "> <div style=" display: flex; justify-content: space-between; align-items: center; margin: 0; padding: 0; height: fit-content; "> <p style=" font-size: 1.2rem; font-family: inherit; font-weight: bold; margin: 0; line-height: 1; opacity: 0.8; "> Source Code </p><button id="closeDialog" style=" padding: 0.25rem; cursor: pointer; font-size: 1.5rem; z-index: 50; background-color: transparent; outline: none; border: none; color: currentColor; " title="Close" onmouseenter="this.style.color=\'#ef4444\';" onmouseleave="this.style.color=\'currentColor\';"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <path d="M18 6 6 18" /> <path d="m6 6 12 12" /> </svg> </button> </div><div id="monacoEditor" style="height: 75%; margin: 5px 0; padding: 5px 0;"></div> <div style=" display: flex; flex-wrap: wrap; gap: 10px; align-items: center; max-width: 100%; padding: 10px; justify-content: space-between; box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2), 0 2px 5px rgba(0, 0, 0, 0.2); border-radius:8px; "> <div id="font-size-btns" style=" display: flex; gap: 10px; align-items: center; flex-wrap: wrap; "> <button id="themeBtn" class="dialog-btn" style=" border-radius: 5px; padding: 8px 10px; border: none; cursor: pointer; background-color: #2e2e2e; color: white; " title="toggle theme"> Dark Theme </button> <button id="fontPlusBtn" class="dialog-btn" title="Increase font size" style=" border-radius: 5px; padding: 8px 10px; border: none; cursor: pointer; background-color: #e5e7eb; color: #222; "> T+ </button> <button id="fontMinusBtn" class="dialog-btn" title="Decrease font size" style=" border-radius: 5px; padding: 8px 10px; border: none; cursor: pointer; background-color: #e5e7eb; color: #222; "> T- </button> </div> <div id="format-btns" style=" display: flex; gap: 10px; align-items: center; flex-wrap: wrap;"> <button id="cancelBtn" class="dialog-btn" style=" border-radius: 5px; padding: 8px 10px; border: none; cursor: pointer; display: inline-flex; align-items: center; gap: 2px; background-color: #e5e7eb; color:#222; " onmouseover="this.style.backgroundColor=\'#006ce7\'; this.style.color=\'white\';" onmouseout="this.style.backgroundColor=\'#e5e7eb\'; this.style.color=\'#222\';" title="close dialog"> Cancel </button> <button id="saveBtn" class="dialog-btn" style=" border-radius: 5px; padding: 8px 10px; border: none; cursor: pointer; background-color: #006ce7; color: white; " title="save & close"> Save </button> </div> </div> </dialog>');let t="vs-light",o=monaco.editor.create(document.getElementById("monacoEditor"),{value:e.getContent({source_code:!0}),language:"html",theme:t,automaticLayout:!0,lineNumbers:"on",readOnly:!1,minimap:{enabled:!0,side:"right",size:"proportional"},showFoldingControls:"always",foldGutter:!1,wrappingIndent:"same",wordWrap:"on",folding:!0,foldingStrategy:"auto",formatOnType:!0,formatOnPaste:!0,scrollBeyondLastLine:!1}),n=document.getElementById("closeDialog"),r=document.getElementById("cancelBtn"),l=document.getElementById("fontPlusBtn"),i=document.getElementById("fontMinusBtn"),d=document.getElementById("themeBtn"),s=()=>{let e=document.getElementById("monacoEditor"),o=document.getElementById("sourceCode");"vs-dark"===t?(monaco.editor.setTheme("vs-light"),d.textContent="Dark Theme",d.style.backgroundColor="#2E2E2E",d.style.color="#fff",e.querySelector(".margin").style.backgroundColor="#f5f5f5",e.querySelector(".line-numbers").style.color="#000",o.style.backgroundColor="#fff",o.style.color="#2b2b2b",o.style.borderColor="#ccc",t="vs-light"):(monaco.editor.setTheme("vs-dark"),d.textContent="Light Theme",d.style.backgroundColor="#e5e7eb",d.style.color="#000",e.querySelector(".margin").style.backgroundColor="inherit",e.querySelector(".line-numbers").style.color="#fff",o.style.backgroundColor="#2b2b2b",o.style.color="#fff",o.style.borderColor="#1e1e1e",t="vs-dark")};d.addEventListener("click",s);let a=14;function c(){let e=document.getElementById("sourceCode");e.close(),e.remove()}l.addEventListener("click",()=>{a+=1,o.updateOptions({fontSize:a})}),i.addEventListener("click",()=>{a>10&&(a-=1,o.updateOptions({fontSize:a}))}),document.getElementById("saveBtn").addEventListener("click",()=>{e.setContent(o.getValue()),o.setValue(""),c()}),n.addEventListener("click",()=>{c()}),r.addEventListener("click",()=>{c()})},o=()=>{t(),document.getElementById("sourceCode").showModal()};e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",shortcut:"meta+Space",onAction:o}),e.ui.registry.addMenuItem("code",{text:"Source Code",icon:"sourcecode",onAction:o}),e.on("keydown",function(e){" "===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),document.getElementById("sourceCode").showModal())})});