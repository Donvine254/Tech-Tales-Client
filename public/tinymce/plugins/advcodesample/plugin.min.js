const languages=[{text:"HTML/XML",value:"haml"},{text:"JavaScript",value:"javascript"},{text:"TypeScript",value:"typescript"},{text:"Json",value:"json"},{text:"CSS",value:"css"},{text:"Bash",value:"bash"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"Go",value:"go"},{text:"Kotlin",value:"kotlin"},{text:"Markdown",value:"markdown"},{text:"PowerShell",value:"powershell"},{text:"SQL",value:"sql"},{text:"Swift",value:"swift"},{text:"YAML",value:"yaml"}];tinymce.PluginManager.add("advcodesample",e=>{let t=()=>{let t=`
    <dialog
    id="advcodesampleDialog"
    style="
      width: 95%;
      height: 90%;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      position:relative;
    ">
    <div
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 0;
        padding: 0;
        height: fit-content;
      ">
      <p
        style="
          font-size: 1.2rem;
          font-family: Poppins;
          font-weight: normal;
          margin: 0;
          line-height: 1;
        ">
        Insert / Edit Code Sample
      </p>
      <button
        id="closeBtn"
        style="
          padding: 0.25rem;
          cursor: pointer;
          font-size: 1.5rem;
          z-index: 50;
          background-color: transparent;
          outline: none;
          border: none;
        "
        title="Close"
        onmouseenter="this.style.color='#ef4444';"
        onmouseleave="this.style.color='#222';">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round">
          <path d="M18 6 6 18" />
          <path d="m6 6 12 12" />
        </svg>
      </button>
    </div>
    <div style="margin: 0">
      <p style="color: #696969; margin: 0; line-height: 1">Language</p>
      <select
        id="language"
        style="
          max-width: 100%;
          width:100%;
          padding: 10px 5px;
          font: 14px;
          border-radius: 8px;
          margin: 5px 0;
          border: 1px solid #ccc;
        "
        onfocus="this.style.border='2px solid #006ce7'; this.style.outline='none';"
        onblur="this.style.border='1px solid #ccc';">
        ${languages.map(e=>`
        <option value="${e.value}">${e.text}</option>
        `).join("")}
      </select>
    </div>
    <div
id="codesample"
style="
  max-width: 100%;
  height: calc(90% - 120px);
  padding: 5px;
  scroll-behavior: smooth;
  border-radius: 5px;
  border: 2px solid #ccc; 
  margin-bottom: 10px;
  transition: border-color 0.3s ease, outline-color 0.3s ease;
"
z-index="1000"
tabindex="0"
></div>
    <div
      style="
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
        float:right;
      ">
      <div id="format-btns" style="display:flex; gap:10px; align-items:center; flex-wrap:wrap">
        <button
          id="saveBtn"
          class="dialog-btn"
          style="
            border-radius: 5px;
            padding: 5px 10px;
            border: none;
            cursor: pointer;
            background-color: #006ce7;
            color: white;
            height:32px;
          ">
          Save
        </button>
        <button
          id="formatBtn"
          class="dialog-btn"
          style="
            border-radius: 5px;
            padding: 5px 10px;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 2px;
            height:32px;
            background-color: #e5e7eb;
          "
          onmouseover="this.style.backgroundColor='#006ce7'; this.style.color='white';"
          onmouseout="this.style.backgroundColor='#e5e7eb'; this.style.color='#222';">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="14"
            height="14"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-zap">
            <path
              d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z" /></svg>
Format Code
        </button>
      </div>
      <div id="font-size-btns" style="display:flex; gap:10px; align-items:center; flex-wrap:wrap">
        <button
          id="themeBtn"
          class="dialog-btn"
          style="
            border-radius: 5px;
            padding: 5px 10px;
            border: none;
            cursor: pointer;
            background-color: #222;
            color: #fff;
            height:32px;
          ">
          Dark Theme
        </button>
        <button
          id="fontPlusBtn"
          class="dialog-btn"
          title="Increase font size"
          style="
            border-radius: 5px;
            padding: 5px 10px;
            border: none;
            cursor: pointer;
            background-color: #e5e7eb;
            height:32px;
          ">
          T+
        </button>
        <button
          id="fontMinusBtn"
          class="dialog-btn"
          title="Decrease font size"
          style="
            border-radius: 5px;
            padding: 5px 10px;
            border: none;
            cursor: pointer;
            background-color: #e5e7eb;
            height:32px;
          ">
          T-
        </button>
      </div>
    </div>
  </dialog>
  `;document.body.insertAdjacentHTML("beforeend",t);let n=()=>{let e=ace.edit("codesample"),t=e.getTheme(),o=document.getElementById("themeBtn");"ace/theme/tomorrow"===t?(e.setTheme("ace/theme/tomorrow_night"),o.textContent="Light Theme",o.style.backgroundColor="#f2f3f4",o.style.color="#333"):(e.setTheme("ace/theme/tomorrow"),o.textContent="Dark Theme",o.style.backgroundColor="#222",o.style.color="#fff")};document.getElementById("fontPlusBtn").addEventListener("click",l),document.getElementById("fontMinusBtn").addEventListener("click",i),document.getElementById("themeBtn").addEventListener("click",n),document.getElementById("formatBtn").addEventListener("click",()=>{ace.config.loadModule("ace/ext/beautify",function(e){e.beautify(ace.edit("codesample").session)})}),document.getElementById("language").addEventListener("click",a),document.getElementById("saveBtn").addEventListener("click",()=>{let t=ace.edit("codesample"),n=document.getElementById("language"),l=n.value,i=o(t.getValue());e.insertContent(`<pre class="language-${l}"><code>${i}</code></pre>`),d()}),document.getElementById("closeBtn").addEventListener("click",d)};function o(e){let t=document.createElement("textarea");return t.textContent=e,t.innerHTML}let n=12,l=()=>{let e=ace.edit("codesample");n<26&&(n+=2,e.setFontSize(n))},i=()=>{let e=ace.edit("codesample");n>10&&(n-=2,e.setFontSize(n))};function a(e){let t=ace.edit("codesample"),o=e.target.value;console.log(o),t.session.setMode(`ace/mode/${o}`)}let r=()=>{t(),ace.config.loadModule("ace/ext/language_tools",function(){let t=ace.edit("codesample");t.session.setMode("ace/mode/html"),t.setOptions({wrap:!0,indentedSoftWrap:!1,enableAutoIndent:!0,selectionStyle:"text",behavioursEnabled:!0,showLineNumbers:!0,showPrintMargin:!1,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,autoScrollEditorIntoView:!0,foldStyle:"markbegin",showFoldWidgets:!0,fontSize:"14px",tabSize:2,theme:"ace/theme/tomorrow"}),t.setValue(e.getContent({source_code:!0}))}),document.getElementById("advcodesampleDialog").showModal()},d=()=>{document.getElementById("advcodesampleDialog").remove()};e.ui.registry.addButton("advcodesample",{icon:"code-sample",tooltip:"Insert/Edit Code Sample",shortcut:"meta+alt+c",onAction:r}),e.ui.registry.addMenuItem("advcodesample",{text:"Insert/Edit Code Sample",icon:"code-sample",onAction:r})});